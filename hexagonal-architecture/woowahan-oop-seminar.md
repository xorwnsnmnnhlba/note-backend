# <우아한 객체지향> 세미나

### 클래스 의존성
* 클래스 A와 클래스 B가 있다고 가정할 때, 두 클래스의 의존성을 정의할 수 있음. 아래와 같이 분류 가능함.
	* 연관 관계(Assosiation)
		* 클래스 B 타입 인스턴스 b가 클래스 A의 필드로 존재할 때를 의미함.
		* 협력을 위해 영구적으로 구성된 관계라 보면 됨.
		* 탐색가능성(Navigability)에 초점을 두고 있음.
			* "어떠한 객체가 있는데, 이 객체를 알면 다른 객체를 찾아갈 수 있다."
	* 의존 관계(Dependency)
		* 클래스 A에 선언된 임의의 메서드 파라미터나 리턴 타입이 클래스 B 타입 인스턴스 b일 때를 의미함.
		* 협력하는 과정에서만 쓰이는 일시적 관계라 보면 됨.
	* 상속 관계(Inheritance)
		* 클래스 A가 클래스 B를 상속받을 때를 의미함.
		* 클래스 B의 구현 내용이 바뀌게되면, 자연스럽게 B를 상속받는 A의 내용도 바뀌게 됨.
	* 실체화 관계(Realization)
		* 클래스 A가 인터페이스 B에 있는 추상 메서드들을 물려받아 구체적으로 구현할 때를 의미함.

<br>

### 클래스 간 의존성 설계 시 유의사항
* 서로를 의존하는 양방향 의존성을 피해야 함.
* 성능 영향도 최소화를 위해 다중성이 적은 방향을 선택해야 함.
	* JPA의 경우, 일대다(OneToMany) 관계보다는 다대일(ManyToOne) 관계를 설정하는 것이 좋음.
* 의존성이 필요없다면 제거하라.
* 패키지 사이의 의존성 사이클을 제거하여 순환참조를 막아라.
* 관계 구성 시, 방향성이 필요함.
	* 관계의 방향은 곧 협력의 방향이자 의존성의 방향이라 할 수 있음.

<br>

### 객체 참조의 문제점
* 모든 객체들이 연결되어 있기 때문에 어떠한 객체라도 함께 수정할 수 있는 여지가 주어진다. -> 결합도가 높아짐.
	* 이러한 결합도를 낮추기 위해 Repository를 거쳐서 비즈니스 로직을 구현해야 함.

<br>

### 어떤 객체들을 묶고 어떤 객체들을 분리해야 하는가
* 하나의 트랜잭션 내에서 함께 생성되고 함께 삭제되는 객체들을 묶어야 함.
* 도메인 제약사항을 공유하는 객체들을 묶어야 함.
* 제한된 컨텍스트(Bounded Context)에 따라 객체들을 어떻게 묶을지 결정해야 함.
	* 경계 안의 객체는 참조를 이용해 접근하며, 경계 밖의 객체는 ID를 이용해 접근해야 함.
* 굳이 묶지 않아도 Repository를 통해 탐색하여 처리할 수 있는 객체들이 있다면 분리시켜야 함.
	* 쇼핑몰을 예로 들자면, 상품 대표정보인 Product와 상품에서 여러 옵션들이 붙은 Item의 경우 묶어줘야 함.
	* 그렇지만 장바구니인 Cart와 판매를 의미하는 Sale의 경우, Item과 따로 분리시켜야 함.
* 참조 없는 객체 그룹들로 분리하게 되면, 특정 객체 그룹에 대한 영속성 저장소 변경이 가능해짐.

<br>

### 패키지 의존성을 끊어내는 세가지 방법
1. 중간 객체를 만들어라.
2. 추상 클래스나 인터페이스를 가지고 의존성을 역전시켜라.
3. 새로운 패키지를 추가하라.
